import pygame

# Constants
WINDOW_WIDTH  = 1024
WINDOW_HEIGHT = 600

BIT_WIDTH    = 5
BIT_HEIGHT   = 5
BIT_SPACING  = 10
LINE_SPACING = 8

BLACK = (0, 0, 0)
GREEN = (0, 255, 0)
DIM_GREEN = (0, 50, 0)

# Testing
testDelayData = "DISPLAY_REG 10000000000000000000000000000000  00000000000000000000000000000000  00000000000000000000000000000000  00000000000000000000000000000000  00000000000000000000000000000000 00000000000000000000000000000000 00000000000000000000000000000000 00000000000000000000000000000000  00000000000000000000000000000000 00000000000000000000000000000000 00000000000000000000000000000000 00000000000000000000000000000000  00000000000000000000000000000000 00000000000000000000000000000000  00000000000000000000000000000000 00000000000000000000000000000000  00000000000000000000000000000000 00000000000000000000000000000000\nDISPLAY_DL 1 01001101110110000000000000000001 00000000000000000000000000000000 01001101110011000000000000000001 00000000000000000000000000000000 01001011001110000000000000000001 00000000000000000000000000000000 01001101111110000000000000000001 00000000000000000000000000000000 01001101100001000000000000000001 00000000000000000000000000000000 01000000110111000000000000000001 01001111110111000000000000000000 01000111010110000000000000000001 00000000000000000000000000000000 01001111010011000000000000000001 00000000000000000000000000000000 01001011011110000000000000000001 00000000000000000000000000000000 01000000110011000000000000000001 00000000000000000000000000000000 01001011000001000000000000000001 00000000000000000000000000000000 01001011011011000000000000100101 00000000000000000000000000000000 00000000000000000000000000000000 00000000000000000000000000000000 00000000000000000000000000000000 00000000000000000000000000000000 00000000000000000000000000000000 00000000000000000000000000000000 00000000000000000000000000000000 00000000000000000000000000000000"

# Functions
def drawDelayLine(canvas, delayLineData):
    y = 20 #Start in from the edge
    for data in delayLineData:
        x = 20

        data = int(data)
        for n in range(0,32):
            if data & 2**32:
                pygame.draw.line(canvas, GREEN, (x, y), (x + BIT_WIDTH, y), BIT_HEIGHT)
            else:
                pygame.draw.line(canvas, DIM_GREEN, (x, y), (x + BIT_WIDTH, y), BIT_HEIGHT)

            data = data << 2
            x += BIT_SPACING
        y += LINE_SPACING

# Initialise Pygame
pygame.init()
canvas = pygame.display.set_mode((WINDOW_WIDTH, WINDOW_HEIGHT))

for line in testDelayData.splitlines():
    dataPoints = line.split()
    if len(dataPoints) > 0:
        if dataPoints[0] == "DISPLAY_REG":
            displayRegData = dataPoints[1:]
        if dataPoints[0] == "DISPLAY_DL":
            num = dataPoints[1]
            delayLineData = dataPoints[2:]

canvas.fill(BLACK)
drawDelayLine(canvas, delayLineData)
pygame.display.flip()

while True:
    pass
